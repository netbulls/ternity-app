<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Notifications Email - V2 Schedule Lens</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oxanium:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../themes.css" />
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        font-family: 'IBM Plex Sans', sans-serif;
        background:
          radial-gradient(circle at 10% 14%, rgba(0, 212, 170, 0.14), transparent 40%),
          radial-gradient(circle at 92% 0%, rgba(64, 106, 255, 0.16), transparent 36%),
          linear-gradient(150deg, #08090d 0%, #0b1116 70%, #0a0b0e 100%);
        color: #e8ecef;
      }

      .shell {
        max-width: 1240px;
        margin: 0 auto;
        padding: 20px;
      }

      .title-row {
        margin-bottom: 10px;
      }

      .eyebrow {
        margin: 0;
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 2.1px;
        color: rgba(255, 255, 255, 0.56);
      }

      h1 {
        margin: 9px 0 0;
        font-family: 'Oxanium', sans-serif;
        font-size: 30px;
        font-weight: 600;
      }

      .subtitle {
        margin: 8px 0 0;
        font-size: 14px;
        line-height: 1.5;
        color: rgba(255, 255, 255, 0.76);
        max-width: 820px;
      }

      .theme-bar {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        margin: 12px 0 14px;
      }

      .theme-btn {
        border: 1px solid rgba(255, 255, 255, 0.12);
        background: rgba(10, 10, 12, 0.85);
        color: rgba(255, 255, 255, 0.7);
        border-radius: 999px;
        padding: 5px 12px;
        font-size: 11px;
        font-weight: 600;
        cursor: pointer;
      }

      .theme-btn.active {
        border-color: rgba(0, 212, 170, 0.55);
        color: #ffffff;
      }

      #app {
        background: hsl(var(--background));
        color: hsl(var(--foreground));
        border: 1px solid hsl(var(--border));
        border-radius: 18px;
        box-shadow: 0 18px 50px rgba(0, 0, 0, 0.3);
        padding: 16px;
      }

      .intro {
        display: grid;
        grid-template-columns: 1.2fr 1fr;
        gap: 14px;
      }

      .panel {
        border: 1px solid hsl(var(--border));
        background: hsl(var(--card));
        border-radius: 12px;
        padding: 12px;
      }

      .panel h2,
      .panel h3 {
        margin: 0;
        font-family: 'Oxanium', sans-serif;
        font-size: 17px;
        font-weight: 600;
      }

      .panel p,
      .panel li {
        margin: 8px 0 0;
        font-size: 13px;
        line-height: 1.45;
        color: hsl(var(--muted-foreground));
      }

      .chip-row {
        display: flex;
        flex-wrap: wrap;
        gap: 7px;
        margin-top: 10px;
      }

      .chip {
        border: 1px solid hsl(var(--border));
        border-radius: 999px;
        background: hsl(var(--muted));
        padding: 5px 10px;
        font-size: 11px;
        font-weight: 600;
        color: hsl(var(--foreground));
      }

      .chip b {
        width: 7px;
        height: 7px;
        display: inline-block;
        border-radius: 999px;
        background: var(--chip-accent);
        margin-right: 6px;
      }

      .timeline {
        margin-top: 14px;
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        background: hsl(var(--card));
        padding: 12px;
      }

      .timeline h3 {
        margin: 0;
        font-family: 'Oxanium', sans-serif;
        font-size: 16px;
      }

      .timeline p {
        margin: 6px 0 0;
        font-size: 12px;
        color: hsl(var(--muted-foreground));
      }

      .track {
        margin-top: 12px;
        border: 1px solid hsl(var(--border));
        border-radius: 10px;
        background: hsl(var(--muted));
        height: 72px;
        position: relative;
        overflow: hidden;
      }

      .schedule-band {
        position: absolute;
        top: 18px;
        left: 17%;
        width: 48%;
        height: 14px;
        border-radius: 999px;
        background: hsl(var(--primary) / 0.28);
        border: 1px solid hsl(var(--primary) / 0.35);
      }

      .tick {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 1px;
        background: hsl(var(--border));
      }

      .tick-label {
        position: absolute;
        top: 52px;
        transform: translateX(-50%);
        font-size: 10px;
        color: hsl(var(--muted-foreground));
      }

      .marker {
        position: absolute;
        top: 6px;
        transform: translateX(-50%);
        border-radius: 999px;
        padding: 3px 7px;
        font-size: 10px;
        font-weight: 700;
        border: 1px solid currentColor;
        background: hsl(var(--card));
      }

      .m-start {
        left: 20%;
        color: hsl(35 100% 62%);
      }

      .m-stop {
        left: 68%;
        color: hsl(355 100% 64%);
      }

      .m-long {
        left: 44%;
        color: hsl(168 100% 42%);
      }

      .m-weekly {
        left: 88%;
        color: hsl(192 94% 60%);
      }

      .cards {
        margin-top: 14px;
        display: grid;
        gap: 10px;
      }

      .lens-card {
        border: 1px solid hsl(var(--border));
        border-radius: 12px;
        background: hsl(var(--card));
        overflow: hidden;
      }

      .lens-head {
        padding: 10px 12px;
        border-bottom: 1px solid hsl(var(--border));
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
      }

      .lens-head::before {
        content: '';
        position: absolute;
      }

      .lens-title {
        margin: 0;
        font-size: 14px;
        font-weight: 700;
      }

      .group-badge {
        border: 1px solid currentColor;
        border-radius: 999px;
        font-size: 10px;
        font-weight: 700;
        padding: 3px 8px;
      }

      .signal {
        padding: 10px 12px;
        border-bottom: 1px solid hsl(var(--border));
      }

      .signal strong {
        display: block;
        font-size: 12px;
        margin-bottom: 4px;
      }

      .signal p {
        margin: 0;
        font-size: 12px;
        line-height: 1.45;
        color: hsl(var(--muted-foreground));
      }

      .split {
        display: grid;
        grid-template-columns: 1fr 1fr;
      }

      .pane {
        padding: 10px 12px;
      }

      .pane + .pane {
        border-left: 1px solid hsl(var(--border));
      }

      .pane h4 {
        margin: 0;
        font-family: 'Oxanium', sans-serif;
        font-size: 12px;
        letter-spacing: 0.4px;
      }

      .facts {
        margin: 8px 0 0;
        padding-left: 16px;
      }

      .facts li,
      .pane p {
        margin: 0;
        font-size: 12px;
        line-height: 1.45;
        color: hsl(var(--muted-foreground));
      }

      .facts li + li {
        margin-top: 5px;
      }

      .cta-row {
        margin-top: 8px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .cta {
        border: 0;
        border-radius: 8px;
        padding: 8px 12px;
        font-size: 12px;
        font-weight: 700;
        background: var(--accent);
        color: #02100e;
      }

      .alt-cta {
        font-size: 11px;
        color: hsl(var(--muted-foreground));
      }

      .fields {
        border-top: 1px solid hsl(var(--border));
        padding: 9px 12px;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .field {
        border: 1px solid hsl(var(--border));
        border-radius: 999px;
        background: hsl(var(--muted));
        padding: 3px 8px;
        font-size: 10px;
        font-weight: 700;
      }

      .variant {
        margin-top: 7px;
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
      }

      .variant span {
        font-size: 10px;
        border-radius: 999px;
        border: 1px solid hsl(var(--border));
        background: hsl(var(--muted));
        padding: 2px 7px;
      }

      .g-start-gap {
        --accent: hsl(35 100% 62%);
      }

      .g-stop-gap {
        --accent: hsl(355 100% 64%);
      }

      .g-long-run {
        --accent: hsl(168 100% 42%);
      }

      .g-leave-flow {
        --accent: hsl(236 100% 76%);
      }

      .g-weekly-reconciliation {
        --accent: hsl(192 94% 60%);
      }

      .g-start-gap .group-badge {
        color: hsl(35 100% 62%);
      }

      .g-stop-gap .group-badge {
        color: hsl(355 100% 64%);
      }

      .g-long-run .group-badge {
        color: hsl(168 100% 42%);
      }

      .g-leave-flow .group-badge {
        color: hsl(236 100% 76%);
      }

      .g-weekly-reconciliation .group-badge {
        color: hsl(192 94% 60%);
      }

      @media (max-width: 980px) {
        .intro {
          grid-template-columns: 1fr;
        }

        .split {
          grid-template-columns: 1fr;
        }

        .pane + .pane {
          border-left: 0;
          border-top: 1px solid hsl(var(--border));
        }
      }

      @media (max-width: 720px) {
        .shell {
          padding: 14px;
        }

        h1 {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header class="title-row">
        <p class="eyebrow">Ternity email explorations</p>
        <h1>V2 - Schedule Lens</h1>
        <p class="subtitle">
          Timeline-led transactional design. Users first see when the event happened against their
          schedule, then what to do next. Especially strong for timer reminders and weekly hours
          reconciliation.
        </p>
      </header>

      <div class="theme-bar">
        <button class="theme-btn active" data-theme="ternity-dark">Ternity Dark</button>
        <button class="theme-btn" data-theme="ternity-light">Ternity Light</button>
        <button class="theme-btn" data-theme="midnight">Midnight</button>
        <button class="theme-btn" data-theme="warm-sand">Warm Sand</button>
        <button class="theme-btn" data-theme="carbon">Carbon</button>
        <button class="theme-btn" data-theme="high-contrast">High Contrast</button>
      </div>

      <main id="app" data-theme="ternity-dark">
        <section class="intro">
          <article class="panel">
            <h2>Five notification groups</h2>
            <p>
              Start Gap, Stop Gap, Long Run, Leave Flow, and Weekly Reconciliation. Group labels
              stay visible in every email to preserve recognition across channels.
            </p>
            <div class="chip-row" id="groupChips"></div>
          </article>

          <article class="panel">
            <h3>Shared template partials</h3>
            <ul>
              <li><strong>EmailHeader</strong> keeps sender context and environment.</li>
              <li><strong>StatusBlock + InfoRows</strong> carry event, timing, and key values.</li>
              <li>
                <strong>ActionBlock</strong> uses one primary CTA with fallback deep-link text.
              </li>
              <li><strong>EmailFooter</strong> keeps preferences and support link consistent.</li>
            </ul>
          </article>
        </section>

        <section class="timeline">
          <h3>Daily trigger map (working-hours aware)</h3>
          <p>
            Example baseline from plans: scheduled day 08:30-16:30, with trigger offsets from
            notification thresholds and weekly summary sent Monday or Friday.
          </p>
          <div class="track">
            <div class="schedule-band"></div>
            <span class="marker m-start">start +15m</span>
            <span class="marker m-long">long 4h</span>
            <span class="marker m-stop">end +30m</span>
            <span class="marker m-weekly">weekly</span>
            <i class="tick" style="left: 17%"></i>
            <i class="tick" style="left: 41%"></i>
            <i class="tick" style="left: 65%"></i>
            <i class="tick" style="left: 88%"></i>
            <span class="tick-label" style="left: 17%">08:30</span>
            <span class="tick-label" style="left: 41%">12:30</span>
            <span class="tick-label" style="left: 65%">16:30</span>
            <span class="tick-label" style="left: 88%">Fri 17:00</span>
          </div>
        </section>

        <section class="cards" id="cards"></section>
      </main>
    </div>

    <script>
      const groups = [
        { id: 'start-gap', label: 'Start Gap', color: 'hsl(35 100% 62%)' },
        { id: 'stop-gap', label: 'Stop Gap', color: 'hsl(355 100% 64%)' },
        { id: 'long-run', label: 'Long Run', color: 'hsl(168 100% 42%)' },
        { id: 'leave-flow', label: 'Leave Flow', color: 'hsl(236 100% 76%)' },
        { id: 'weekly-reconciliation', label: 'Weekly Reconciliation', color: 'hsl(192 94% 60%)' },
      ];

      const groupById = Object.fromEntries(groups.map((group) => [group.id, group]));

      const notifications = [
        {
          title: 'Forgot to start timer',
          group: 'start-gap',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - No timer started 15m after 08:30 - Start now or log time manually from your scheduled start.',
          subject: 'No timer started 15m after 08:30',
          preheader: 'Start now or log time manually from your scheduled start.',
          facts: ['Scheduled start: 08:30', 'Trigger threshold: 15m'],
          body: 'Hi Marta, your workday was scheduled to start at 08:30 and we still do not see a running timer. If work already started, log a manual entry from 08:30.',
          cta: 'Start timer',
          fields: ['user: Marta', 'start: 08:30', 'threshold: 15m'],
        },
        {
          title: 'Forgot to stop timer',
          group: 'stop-gap',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Timer still running 30m after your scheduled end - Started at 08:42. Stop it now to avoid over-logging.',
          subject: 'Timer still running 30m after your scheduled end',
          preheader: 'Started at 08:42. Stop it now to avoid over-logging.',
          facts: ['Timer started: 08:42', 'Scheduled end: 16:30'],
          body: 'Hi Marta, your timer is still running beyond 16:30. Stop it now and adjust the entry if break time or context switches were included.',
          cta: 'Stop timer',
          fields: ['user: Marta', 'started: 08:42', 'end: 16:30', 'threshold: 30m'],
        },
        {
          title: 'Long running timer',
          group: 'long-run',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Long running timer detected (6h 18m) - Your threshold is 4h. Review this entry now.',
          subject: 'Long running timer detected (6h 18m)',
          preheader: 'Your threshold is 4h. Review this entry now.',
          facts: ['Elapsed duration: 6h 18m', 'Threshold: 4h'],
          body: 'Hi Marta, this running timer is over your threshold. Review, split, or stop it so reports stay accurate and tied to real work sessions.',
          cta: 'Review timer',
          fields: ['user: Marta', 'elapsed: 6h 18m', 'threshold: 4h', 'started: 08:42'],
        },
        {
          title: 'Leave request update (approved)',
          group: 'leave-flow',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Leave approved: 17-19 Mar 2026 - Your calendar is updated.',
          subject: 'Leave approved: 17-19 Mar 2026',
          preheader: 'Your calendar is updated.',
          facts: ['Status: approved', 'Date range: 17-19 Mar 2026'],
          body: 'Hi Marta, your leave request for 17-19 Mar 2026 was approved. No action is required unless your plans changed.',
          cta: 'View leave',
          fields: ['user: Marta', 'status: approved', 'range: 17-19 Mar 2026'],
        },
        {
          title: 'Leave request update (declined)',
          group: 'leave-flow',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Leave declined: 28 Mar 2026 - Review the note and update your request.',
          subject: 'Leave declined: 28 Mar 2026',
          preheader: 'Review the note and update your request.',
          facts: ['Status: declined', 'Date range: 28 Mar 2026'],
          body: 'Hi Marta, your leave request for 28 Mar 2026 was declined. Manager note: project handover is scheduled that day. Update the date and submit again.',
          cta: 'Edit request',
          fields: ['user: Marta', 'status: declined', 'range: 28 Mar 2026'],
        },
        {
          title: 'Team leave alert',
          group: 'leave-flow',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Team leave alert: Elena is out 24-25 Mar 2026 - Check coverage and replan work if needed.',
          subject: 'Team leave alert: Elena is out 24-25 Mar 2026',
          preheader: 'Check coverage and replan work if needed.',
          facts: ['Teammate: Elena', 'Leave range: 24-25 Mar 2026'],
          body: 'Heads up, Marta - Elena is out during 24-25 Mar 2026. Rebalance assignments or timelines now to avoid delivery risk.',
          cta: 'Open team calendar',
          fields: ['recipient: Marta', 'teammate: Elena', 'range: 24-25 Mar 2026'],
        },
        {
          title: 'Weekly hours report',
          group: 'weekly-reconciliation',
          inboxLine:
            'Ternity <noreply@ternity.xyz> - Weekly hours: 36.5h / 40h - Current gap: 3.5h.',
          subject: 'Weekly hours: 36.5h / 40h',
          preheader: 'Current gap: 3.5h.',
          facts: ['Tracked: 36.5h', 'Expected: 40h', 'Gap: 3.5h'],
          body: 'Hi Marta, you logged 36.5h this week against 40h expected from your schedule. Review missing entries before week close on Friday at 17:00.',
          cta: 'Review week',
          fields: ['user: Marta', 'tracked: 36.5h', 'expected: 40h', 'gap: 3.5h'],
        },
      ];

      function renderGroupChips() {
        const host = document.getElementById('groupChips');
        host.innerHTML = groups
          .map(
            (group) =>
              '<span class="chip"><b style="--chip-accent:' +
              group.color +
              '"></b>' +
              group.label +
              '</span>',
          )
          .join('');
      }

      function renderCards() {
        const host = document.getElementById('cards');
        host.innerHTML = notifications
          .map((item) => {
            const group = groupById[item.group];
            const facts = item.facts.map((fact) => '<li>' + fact + '</li>').join('');
            const fields = item.fields
              .map((field) => '<span class="field">' + field + '</span>')
              .join('');
            const variants = item.variants
              ? '<div class="variant">' +
                item.variants.map((variant) => '<span>' + variant + '</span>').join('') +
                '</div>'
              : '';

            return (
              '<article class="lens-card g-' +
              group.id +
              '">' +
              '<header class="lens-head">' +
              '<h4 class="lens-title">' +
              item.title +
              '</h4>' +
              '<span class="group-badge">' +
              group.label +
              '</span>' +
              '</header>' +
              '<div class="signal">' +
              '<p>Inbox: ' +
              item.inboxLine +
              '</p>' +
              '<strong>Subject: ' +
              item.subject +
              '</strong>' +
              '<p>Preheader: ' +
              item.preheader +
              '</p>' +
              variants +
              '</div>' +
              '<div class="split">' +
              '<section class="pane">' +
              '<h4>Detected</h4>' +
              '<ul class="facts">' +
              facts +
              '</ul>' +
              '</section>' +
              '<section class="pane">' +
              '<h4>Next step</h4>' +
              '<p>' +
              item.body +
              '</p>' +
              '<div class="cta-row"><button class="cta" type="button">' +
              item.cta +
              '</button><span class="alt-cta">Primary CTA</span></div>' +
              '</section>' +
              '</div>' +
              '<footer class="fields">' +
              fields +
              '</footer>' +
              '</article>'
            );
          })
          .join('');
      }

      function initThemeSwitcher() {
        const buttons = document.querySelectorAll('.theme-btn');
        const app = document.getElementById('app');

        buttons.forEach((button) => {
          button.addEventListener('click', () => {
            const theme = button.getAttribute('data-theme');
            app.setAttribute('data-theme', theme);
            buttons.forEach((candidate) => candidate.classList.remove('active'));
            button.classList.add('active');
          });
        });
      }

      renderGroupChips();
      renderCards();
      initThemeSwitcher();
    </script>
  </body>
</html>
